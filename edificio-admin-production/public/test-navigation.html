<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Navegaci√≥n - Edificio Admin</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .sidebar-nav { list-style: none; padding: 0; }
        .sidebar-nav li { margin: 10px 0; }
        .sidebar-nav a { 
            display: block; 
            padding: 10px; 
            background: #f0f0f0; 
            text-decoration: none; 
            color: #333;
            border-radius: 4px;
        }
        .sidebar-nav li.active a { background: #007bff; color: white; }
        .content-section { 
            display: none; 
            padding: 20px; 
            margin: 20px 0; 
            border: 1px solid #ddd; 
            border-radius: 4px;
        }
        .content-section.active { display: block; }
        #debug { 
            background: #f8f9fa; 
            padding: 15px; 
            margin: 20px 0; 
            border-radius: 4px; 
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>Test de Sistema de Navegaci√≥n</h1>
    
    <div id="debug">
        <h3>Debug Info:</h3>
        <div id="debug-output">Cargando...</div>
    </div>

    <div style="display: flex; gap: 20px;">
        <div style="width: 200px;">
            <h3>Men√∫ de Navegaci√≥n</h3>
            <nav class="sidebar-nav">
                <ul>
                    <li class="active"><a href="#dashboard">Dashboard</a></li>
                    <li><a href="#usuarios">Usuarios</a></li>
                    <li><a href="#cuotas">Cuotas</a></li>
                    <li><a href="#gastos">Gastos</a></li>
                    <li><a href="#fondos">Fondos</a></li>
                    <li><a href="#anuncios">Anuncios</a></li>
                    <li><a href="#cierres">Cierres</a></li>
                    <li><a href="#parcialidades">Parcialidades</a></li>
                </ul>
            </nav>
        </div>

        <div style="flex: 1;">
            <h3 id="page-title">Dashboard</h3>
            
            <section id="dashboard-section" class="content-section active">
                <h4>Dashboard</h4>
                <p>Esta es la secci√≥n del dashboard.</p>
            </section>
            
            <section id="usuarios-section" class="content-section">
                <h4>Usuarios</h4>
                <p>Esta es la secci√≥n de usuarios.</p>
            </section>
            
            <section id="cuotas-section" class="content-section">
                <h4>Cuotas</h4>
                <p>Esta es la secci√≥n de cuotas.</p>
            </section>
            
            <section id="gastos-section" class="content-section">
                <h4>Gastos</h4>
                <p>Esta es la secci√≥n de gastos.</p>
            </section>
            
            <section id="fondos-section" class="content-section">
                <h4>Fondos</h4>
                <p>Esta es la secci√≥n de fondos.</p>
            </section>
            
            <section id="anuncios-section" class="content-section">
                <h4>Anuncios</h4>
                <p>Esta es la secci√≥n de anuncios.</p>
            </section>
            
            <section id="cierres-section" class="content-section">
                <h4>Cierres</h4>
                <p>Esta es la secci√≥n de cierres.</p>
            </section>
            
            <section id="parcialidades-section" class="content-section">
                <h4>Parcialidades</h4>
                <p>Esta es la secci√≥n de parcialidades.</p>
            </section>
        </div>
    </div>

    <!-- Scripts en el orden correcto -->
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    
    <script>
        // Mock de los m√≥dulos para testing
        window.DashboardModule = { loadDashboard: () => console.log('‚úÖ DashboardModule.loadDashboard called') };
        window.UsuariosModule = { loadUsuarios: () => console.log('‚úÖ UsuariosModule.loadUsuarios called') };
        window.CuotasModule = { loadCuotas: () => console.log('‚úÖ CuotasModule.loadCuotas called') };
        window.GastosModule = { loadGastos: () => console.log('‚úÖ GastosModule.loadGastos called') };
        window.FondosModule = { loadFondos: () => console.log('‚úÖ FondosModule.loadFondos called') };
        window.AnunciosModule = { loadAnuncios: () => console.log('‚úÖ AnunciosModule.loadAnuncios called') };
        window.CierresModule = { loadCierres: () => console.log('‚úÖ CierresModule.loadCierres called') };
        window.ParcialidadesModule = { loadParcialidades: () => console.log('‚úÖ ParcialidadesModule.loadParcialidades called') };
        
        // Mock de Auth para testing
        window.Auth = { getCurrentUser: () => ({ nombre: 'Test User', rol: 'admin' }) };
    </script>
    
    <script src="js/navigation.js"></script>
    
    <script>
        // Script de debug y testing
        document.addEventListener('DOMContentLoaded', () => {
            const debugOutput = document.getElementById('debug-output');
            let debugInfo = [];
            
            // Verificar NavigationSystem
            debugInfo.push(`NavigationSystem: ${typeof NavigationSystem !== 'undefined' ? '‚úÖ Definido' : '‚ùå No definido'}`);
            
            // Verificar m√≥dulos
            const modules = ['DashboardModule', 'UsuariosModule', 'CuotasModule', 'GastosModule', 'FondosModule', 'AnunciosModule', 'CierresModule', 'ParcialidadesModule'];
            modules.forEach(module => {
                debugInfo.push(`${module}: ${typeof window[module] !== 'undefined' ? '‚úÖ' : '‚ùå'}`);
            });
            
            // Verificar elementos DOM
            debugInfo.push(`Secciones encontradas: ${document.querySelectorAll('.content-section').length}`);
            debugInfo.push(`Enlaces de navegaci√≥n: ${document.querySelectorAll('.sidebar-nav a').length}`);
            
            debugOutput.innerHTML = debugInfo.join('<br>');
            
            // Escuchar clics en navegaci√≥n
            document.addEventListener('click', (e) => {
                const navLink = e.target.closest('.sidebar-nav a');
                if (navLink) {
                    console.log('üñ±Ô∏è Clic en:', navLink.textContent, '‚Üí', navLink.getAttribute('href'));
                }
            });
            
            // Test autom√°tico despu√©s de 2 segundos
            setTimeout(() => {
                if (typeof NavigationSystem !== 'undefined' && NavigationSystem.showSection) {
                    console.log('üß™ Probando navegaci√≥n autom√°tica...');
                    NavigationSystem.showSection('usuarios');
                    
                    setTimeout(() => {
                        const usuariosActive = document.getElementById('usuarios-section').classList.contains('active');
                        console.log('Resultado test:', usuariosActive ? '‚úÖ √âXITO' : '‚ùå FALLO');
                        debugInfo.push(`Test autom√°tico: ${usuariosActive ? '‚úÖ √âXITO' : '‚ùå FALLO'}`);
                        debugOutput.innerHTML = debugInfo.join('<br>');
                    }, 100);
                }
            }, 2000);
        });
    </script>
</body>
</html>