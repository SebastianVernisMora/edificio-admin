var d=class{constructor(){this.modules=new Map,this.loading=new Map,this.dependencies=new Map,this.baseUrl="/dist/js/modules"}register(s,o){this.dependencies.set(s,{path:o.path||`${this.baseUrl}/${s}.js`,deps:o.deps||[],preload:o.preload||!1})}async load(s){if(this.modules.has(s))return console.log(`\u2713 Module "${s}" already loaded`),this.modules.get(s);if(this.loading.has(s))return console.log(`\u23F3 Module "${s}" is loading...`),this.loading.get(s);console.log(`\u{1F4E6} Loading module "${s}"...`);let o=this.dependencies.get(s);o&&o.deps.length>0&&(console.log(`  \u21B3 Loading dependencies: ${o.deps.join(", ")}`),await Promise.all(o.deps.map(e=>this.load(e))));let t=this._loadModule(s);this.loading.set(s,t);try{let e=await t;return e.init&&typeof e.init=="function"&&(console.log(`  \u21B3 Initializing module "${s}"...`),await e.init()),this.modules.set(s,e),this.loading.delete(s),console.log(`\u2705 Module "${s}" loaded`),e}catch(e){throw this.loading.delete(s),console.error(`\u274C Error loading module "${s}":`,e),e}}async _loadModule(s){let o=this.dependencies.get(s);if(!o)throw new Error(`Module "${s}" not registered`);try{let t=await import(o.path);return t.default||t}catch(t){throw new Error(`Failed to load module "${s}": ${t.message}`)}}async preload(s){console.log(`\u{1F680} Preloading modules: ${s.join(", ")}`);let o=await Promise.allSettled(s.map(e=>this.load(e))),t=o.filter(e=>e.status==="rejected");return t.length>0&&console.warn("\u26A0\uFE0F Some modules failed to preload:",t),o}unload(s){if(this.modules.has(s)){let o=this.modules.get(s);if(o.cleanup&&typeof o.cleanup=="function"){console.log(`\u{1F9F9} Cleaning up module "${s}"...`);try{o.cleanup()}catch(t){console.error(`Error during cleanup of "${s}":`,t)}}this.modules.delete(s),console.log(`\u2713 Module "${s}" unloaded`)}}isLoaded(s){return this.modules.has(s)}get(s){return this.modules.get(s)}getLoadedModules(){return Array.from(this.modules.keys())}async reload(s){return console.log(`\u{1F504} Reloading module "${s}"...`),this.unload(s),this.load(s)}clear(){Array.from(this.modules.keys()).forEach(o=>this.unload(o)),console.log("\u{1F9F9} All modules cleared")}},i=new d;i.register("cuotas",{path:"/dist/js/modules/cuotas-optimized.js",deps:[]});i.register("gastos",{path:"/dist/js/modules/gastos-optimized.js",deps:[]});i.register("fondos",{path:"/dist/js/modules/fondos-optimized.js",deps:[]});i.register("anuncios",{path:"/dist/js/modules/anuncios-optimized.js",deps:[]});i.register("cierres",{path:"/dist/js/modules/cierres-optimized.js",deps:["cuotas","gastos"]});typeof window<"u"&&(window.__MODULES__=i);var l=i;export{l as default};
